<kendo-grid
    [kendoGridBinding]="gridData"
    [sortable]="sortable && !_loading"
    [pageable]="pageable"
    [filterable]="filterable && !_loading"
    [groupable]="groupable"
    [reorderable]="reorderable"
    [resizable]="resizable"
    [height]="gridHeight"
    [loading]="_loading"
    [sort]="sort"
    [filter]="defaultFilter"
    [pageSize]="resolveDefault(pageSize, 5)"

    (edit)="editHandler($event)"
    (cancel)="cancelHandler($event)"
    (save)="saveHandler($event)"
    (add)="addHandler($event)"
    (remove)="removeHandler($event)"
  >
    <ng-template *ngIf="canCreate && !_loading" kendoGridToolbarTemplate>
      <button kendoGridAddCommand>Add new</button>
    </ng-template>

    <kendo-grid-column
      *ngFor="let column of _columnConfig"
      [field]="column.alias"
      [autoSize]="false"
      [title]="resolveDefault(column.title, column.alias)"
      [width]="resolveDefault(column.width, 300)"
      [hidden]="resolveDefault(column.hidden, false)"
      [filterable]="resolveDefault(column.filterable, true)"
      [filter]="resolveDefault(column.filter, 'text')"
    >
      <ng-container *ngIf="column.customFilter">
        <ng-container *ngIf="resolveDictionary(column) | async as dictionary">
          <ng-template kendoGridFilterCellTemplate let-filter>
            <app-dropdown-filter
              [filter]="filter"
              [data]="dictionary"
              [valueField]="column.alias"
            ></app-dropdown-filter>
          </ng-template>
        </ng-container>
      </ng-container>

      <ng-template kendoGridCellTemplate let-item>
          <ng-container *ngTemplateOutlet="column.customTemplate || column.template || null; context: {item: item[column.alias]}"></ng-container>
      </ng-template>
    </kendo-grid-column>

    <kendo-grid-command-column *ngIf="editable || removable" title="Commands">
      <ng-template kendoGridCellTemplate let-isNew="isNew">
        <button *ngIf="editable" kendoGridEditCommand [primary]="true">Edit</button>
        <button *ngIf="removable" kendoGridRemoveCommand>Remove</button>

        <!-- [disabled]="formGroup?.invalid" -->
        <button kendoGridSaveCommand>{{ isNew ? "Add" : "Update" }}</button>
        <button kendoGridCancelCommand>{{ isNew ? "Discard changes" : "Cancel" }}</button>
      </ng-template>
    </kendo-grid-command-column>
</kendo-grid>